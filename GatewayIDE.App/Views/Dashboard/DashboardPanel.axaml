<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:conv="clr-namespace:GatewayIDE.App"
             x:Class="GatewayIDE.App.Views.Dashboard.DashboardPanel">

  <!-- ================= STYLES ================= -->
  <UserControl.Styles>

    <!-- Card -->
    <Style Selector="Border.card">
      <Setter Property="Background" Value="#141414"/>
      <Setter Property="BorderBrush" Value="#2a2a2a"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="CornerRadius" Value="12"/>
      <Setter Property="Padding" Value="16"/>
    </Style>

    <!-- Titles -->
    <Style Selector="TextBlock.h1">
      <Setter Property="Foreground" Value="#eaeaea"/>
      <Setter Property="FontSize" Value="18"/>
      <Setter Property="FontWeight" Value="SemiBold"/>
    </Style>

    <Style Selector="TextBlock.h2">
      <Setter Property="Foreground" Value="#eaeaea"/>
      <Setter Property="FontSize" Value="14"/>
      <Setter Property="FontWeight" Value="SemiBold"/>
    </Style>

    <Style Selector="TextBlock.muted">
      <Setter Property="Foreground" Value="#9a9a9a"/>
      <Setter Property="FontSize" Value="12"/>
    </Style>

    <!-- Badge -->
    <Style Selector="Border.badge">
      <Setter Property="CornerRadius" Value="999"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="Padding" Value="8,3"/>
    </Style>

    <Style Selector="TextBlock.badgeText">
      <Setter Property="FontSize" Value="12"/>
      <Setter Property="FontWeight" Value="SemiBold"/>
    </Style>

    <!-- List row -->
    <Style Selector="Border.row">
      <Setter Property="Background" Value="#101010"/>
      <Setter Property="BorderBrush" Value="#242424"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="CornerRadius" Value="10"/>
      <Setter Property="Padding" Value="10"/>
    </Style>

    <Style Selector="TextBlock.mono">
      <Setter Property="FontFamily" Value="Consolas, Cascadia Mono, Menlo, monospace"/>
      <Setter Property="FontSize" Value="12"/>
      <Setter Property="Foreground" Value="#d8d8d8"/>
    </Style>

  </UserControl.Styles>

  <!-- ================= LAYOUT ================= -->
  <Grid Background="#0f0f0f">
    <ScrollViewer Margin="12"
                  HorizontalScrollBarVisibility="Disabled"
                  VerticalScrollBarVisibility="Auto">

      <!-- ROOT STACK -->
      <StackPanel Spacing="16">

        <!-- ===== HEADER ===== -->
        <Border Classes="card">
          <StackPanel Spacing="6">
            <TextBlock Classes="h1" Text="Dashboard"/>
            <TextBlock Classes="muted"
                       Text="Systemstatus und laufende Container"/>
          </StackPanel>
        </Border>

        <!-- ===== STATUS CARDS ===== -->
        <Grid ColumnDefinitions="*,12,*">

          <!-- Docker Installed -->
          <Border Classes="card" Grid.Column="0">
            <StackPanel Spacing="10">
              <TextBlock Classes="h2" Text="Docker installiert"/>

              <Border Classes="badge"
                      BorderBrush="{Binding DockerInstalled, Converter={x:Static conv:BooleanToBrushConverter.Instance}, ConverterParameter=Border}"
                      Background="{Binding DockerInstalled, Converter={x:Static conv:BooleanToBrushConverter.Instance}, ConverterParameter=Background}">
                <TextBlock Classes="badgeText"
                           Foreground="{Binding DockerInstalled, Converter={x:Static conv:BooleanToBrushConverter.Instance}, ConverterParameter=Foreground}"
                           Text="{Binding DockerInstalled, Converter={x:Static conv:BooleanToTextConverter.Instance}}"/>
              </Border>

              <TextBlock Classes="muted"
                         Text="DashboardState.DockerInstalled"/>
            </StackPanel>
          </Border>

          <!-- Docker Running -->
          <Border Classes="card" Grid.Column="2">
            <StackPanel Spacing="10">
              <TextBlock Classes="h2" Text="Docker läuft"/>

              <Border Classes="badge"
                      BorderBrush="{Binding DockerRunning, Converter={x:Static conv:BooleanToBrushConverter.Instance}, ConverterParameter=Border}"
                      Background="{Binding DockerRunning, Converter={x:Static conv:BooleanToBrushConverter.Instance}, ConverterParameter=Background}">
                <TextBlock Classes="badgeText"
                           Foreground="{Binding DockerRunning, Converter={x:Static conv:BooleanToBrushConverter.Instance}, ConverterParameter=Foreground}"
                           Text="{Binding DockerRunning, Converter={x:Static conv:BooleanToTextConverter.Instance}}"/>
              </Border>

              <TextBlock Classes="muted"
                         Text="DashboardState.DockerRunning"/>
            </StackPanel>
          </Border>

        </Grid>

        <!-- ===== RUNNING CONTAINERS ===== -->
        <Border Classes="card">
          <Grid RowDefinitions="Auto,8,*,8,Auto">

            <!-- Header -->
            <Grid ColumnDefinitions="*,Auto">
              <TextBlock Classes="h2" Text="Laufende Container"/>
              <TextBlock Grid.Column="1"
                         Classes="muted"
                         Text="{Binding RunningContainers.Count, StringFormat='Anzahl: {0}'}"/>
            </Grid>

            <!-- List -->
            <ScrollViewer Grid.Row="2"
                          VerticalScrollBarVisibility="Auto">
              <ItemsControl ItemsSource="{Binding RunningContainers}">
                <ItemsControl.ItemTemplate>
                  <DataTemplate>
                    <Border Classes="row" Margin="0,0,0,8">
                      <StackPanel Spacing="6">

                        <Grid ColumnDefinitions="*,Auto">
                          <TextBlock Classes="mono" Text="{Binding Name}"/>
                          <TextBlock Grid.Column="1"
                                     Classes="mono"
                                     Foreground="#a9a9a9"
                                     Text="{Binding Status}"/>
                        </Grid>

                        <TextBlock Classes="muted"
                                   Text="{Binding Image, StringFormat='Image: {0}'}"/>

                        <TextBlock Classes="muted"
                                   Text="{Binding Ports, StringFormat='Ports: {0}'}"/>

                      </StackPanel>
                    </Border>
                  </DataTemplate>
                </ItemsControl.ItemTemplate>
              </ItemsControl>
            </ScrollViewer>

            <!-- Empty hint -->
            <Border Grid.Row="4"
                    IsVisible="{Binding RunningContainers.Count,
                                Converter={x:Static conv:ZeroToBoolConverter.Instance},
                                ConverterParameter=invert}">
              <StackPanel Spacing="6">
                <TextBlock Classes="h2" Text="Keine laufenden Container"/>
                <TextBlock Classes="muted"
                           Text="Sobald Docker läuft und Container aktiv sind, erscheint hier die Liste."/>
              </StackPanel>
            </Border>

          </Grid>
        </Border>

      </StackPanel>
    </ScrollViewer>
  </Grid>
</UserControl>
