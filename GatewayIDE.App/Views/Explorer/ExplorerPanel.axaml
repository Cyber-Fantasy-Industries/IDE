<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="GatewayIDE.App.Views.Explorer.ExplorerPanel">

  <UserControl.Styles>

    <!-- Flat pane -->
    <Style Selector="Border.pane">
      <Setter Property="Background" Value="#0f0f0f"/>
      <Setter Property="BorderBrush" Value="#2a2a2a"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="CornerRadius" Value="0"/>
      <Setter Property="Padding" Value="0"/>
    </Style>

    <!-- Pane header strip -->
    <Style Selector="Border.headerStrip">
      <Setter Property="Background" Value="#0f0f0f"/>
      <Setter Property="BorderBrush" Value="#2a2a2a"/>
      <Setter Property="BorderThickness" Value="0,0,0,1"/>
      <Setter Property="Padding" Value="12,10"/>
    </Style>

    <Style Selector="TextBlock.header">
      <Setter Property="Foreground" Value="#eaeaea"/>
      <Setter Property="FontSize" Value="13"/>
      <Setter Property="FontWeight" Value="SemiBold"/>
    </Style>

    <Style Selector="TextBlock.muted">
      <Setter Property="Foreground" Value="#9a9a9a"/>
      <Setter Property="FontSize" Value="12"/>
    </Style>

    <Style Selector="TextBlock.tree">
      <Setter Property="Foreground" Value="#ddd"/>
      <Setter Property="FontSize" Value="12"/>
    </Style>

    <!-- Flat search -->
    <Style Selector="TextBox.search">
      <Setter Property="Background" Value="#101010"/>
      <Setter Property="BorderBrush" Value="#2a2a2a"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="CornerRadius" Value="0"/>
      <Setter Property="Padding" Value="10,8"/>
      <Setter Property="Foreground" Value="#eaeaea"/>
    </Style>

    <!-- Flat item -->
    <Style Selector="Border.item">
      <Setter Property="Background" Value="#101010"/>
      <Setter Property="BorderBrush" Value="#2a2a2a"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="CornerRadius" Value="0"/>
      <Setter Property="Padding" Value="10"/>
    </Style>

  </UserControl.Styles>

  <!-- ROOT: edge-to-edge -->
  <Grid Background="#0f0f0f"
        ColumnDefinitions="320,1,*"
        RowDefinitions="*">

    <!-- LEFT NAV -->
    <Border Grid.Column="0" Classes="pane">
      <Grid RowDefinitions="Auto,*">

        <Border Classes="headerStrip">
          <TextBlock Classes="header" Text="Explorer"/>
        </Border>

        <ScrollViewer Grid.Row="1">
          <TreeView ItemsSource="{Binding ProjectTree}">
            <TreeView.ItemTemplate>
              <TreeDataTemplate ItemsSource="{Binding Children}">
                <TextBlock Classes="tree" Text="{Binding Name}"/>
              </TreeDataTemplate>
            </TreeView.ItemTemplate>
          </TreeView>
        </ScrollViewer>

      </Grid>
    </Border>

    <!-- VERTICAL DIVIDER -->
    <Border Grid.Column="1" Background="#2a2a2a"/>

    <!-- RIGHT SIDE -->
    <Grid Grid.Column="2" RowDefinitions="*,1,Auto">

      <!-- TOP RIGHT: FREE WORKSPACE -->
      <Border Grid.Row="0" Classes="pane">
        <Grid RowDefinitions="Auto,*">

          <Border Classes="headerStrip">
            <TextBlock Classes="header" Text="(frei)"/>
          </Border>

          <!-- empty workspace area -->
          <Border Grid.Row="1" Background="#0f0f0f"/>
        </Grid>
      </Border>

      <!-- HORIZONTAL DIVIDER -->
      <Border Grid.Row="1" Background="#2a2a2a"/>

      <!-- BOTTOM RIGHT: DOCKED CONTENT EXPLORER -->
      <Border Grid.Row="2" Classes="pane">
        <Grid RowDefinitions="Auto,Auto,*">

          <!-- header -->
          <Border Classes="headerStrip">
            <Grid ColumnDefinitions="*,Auto">
              <TextBlock Classes="header" Text="Content Explorer"/>
              <TextBlock Grid.Column="1"
                         Classes="muted"
                         Text="{Binding ContentItems.Count, StringFormat='Items: {0}'}"/>
            </Grid>
          </Border>

          <!-- search -->
          <Border Padding="12,10" BorderBrush="#2a2a2a" BorderThickness="0,0,0,1">
            <TextBox Classes="search"
                     Text="{Binding ContentSearch}"
                     Watermark="Search content / assetsâ€¦"/>
          </Border>

          <!-- grid -->
          <ScrollViewer Grid.Row="2">
            <ItemsControl ItemsSource="{Binding ContentItems}">
              <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                  <WrapPanel ItemWidth="120" ItemHeight="120"/>
                </ItemsPanelTemplate>
              </ItemsControl.ItemsPanel>

              <ItemsControl.ItemTemplate>
                <DataTemplate>
                  <Border Classes="item" Margin="0,0,12,12">
                    <StackPanel Spacing="6"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center">
                      <Border Width="48" Height="48"
                              Background="#1f1f1f"/>
                      <TextBlock Classes="muted"
                                 Text="{Binding Name}"
                                 TextAlignment="Center"
                                 TextWrapping="Wrap"/>
                    </StackPanel>
                  </Border>
                </DataTemplate>
              </ItemsControl.ItemTemplate>
            </ItemsControl>
          </ScrollViewer>

        </Grid>
      </Border>

    </Grid>

  </Grid>
</UserControl>
