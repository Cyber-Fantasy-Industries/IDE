<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="GatewayIDE.App.Views.Explorer.ExplorerPanel">

  <!-- ========================= -->
  <!-- STYLES                    -->
  <!-- ========================= -->
  <UserControl.Styles>

    <Style Selector="Border.card">
      <Setter Property="Background" Value="#141414"/>
      <Setter Property="BorderBrush" Value="#2a2a2a"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="CornerRadius" Value="10"/>
      <Setter Property="Padding" Value="10"/>
    </Style>

    <Style Selector="TextBlock.header">
      <Setter Property="Foreground" Value="#eaeaea"/>
      <Setter Property="FontSize" Value="14"/>
      <Setter Property="FontWeight" Value="SemiBold"/>
    </Style>

    <Style Selector="TextBlock.muted">
      <Setter Property="Foreground" Value="#9a9a9a"/>
      <Setter Property="FontSize" Value="12"/>
    </Style>

    <Style Selector="TextBlock.tree">
      <Setter Property="Foreground" Value="#ddd"/>
      <Setter Property="FontSize" Value="12"/>
    </Style>

    <Style Selector="Border.item">
      <Setter Property="Background" Value="#101010"/>
      <Setter Property="BorderBrush" Value="#222"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="CornerRadius" Value="8"/>
      <Setter Property="Padding" Value="10"/>
    </Style>

    <Style Selector="TextBox.search">
      <Setter Property="Background" Value="#101010"/>
      <Setter Property="BorderBrush" Value="#2a2a2a"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="CornerRadius" Value="8"/>
      <Setter Property="Padding" Value="8,6"/>
      <Setter Property="Foreground" Value="#eaeaea"/>
      <Setter Property="WatermarkForeground" Value="#7a7a7a"/>
    </Style>

  </UserControl.Styles>

  <!-- ========================= -->
  <!-- ROOT                      -->
  <!-- ========================= -->
  <Grid Background="#0f0f0f"
        Margin="12"
        ColumnDefinitions="320,12,*">

    <!-- ===================================================== -->
    <!-- LEFT: PROJECT / FILE EXPLORER                         -->
    <!-- ===================================================== -->
    <Border Grid.Column="0" Classes="card">
      <Grid RowDefinitions="Auto,8,*">

        <TextBlock Classes="header" Text="Explorer"/>

        <!-- Tree -->
        <ScrollViewer Grid.Row="2">
          <TreeView ItemsSource="{Binding ProjectTree}">
            <TreeView.ItemTemplate>
              <TreeDataTemplate ItemsSource="{Binding Children}">
                <TextBlock Classes="tree"
                           Text="{Binding Name}"/>
              </TreeDataTemplate>
            </TreeView.ItemTemplate>
          </TreeView>
        </ScrollViewer>

      </Grid>
    </Border>

    <!-- ===================================================== -->
    <!-- RIGHT: CONTENT EXPLORER (ENGINE / ASSETS)             -->
    <!-- ===================================================== -->
    <Border Grid.Column="2" Classes="card">
      <Grid RowDefinitions="Auto,8,Auto,8,*">

        <Grid ColumnDefinitions="*,Auto">
          <TextBlock Classes="header" Text="Content Explorer"/>
          <TextBlock Grid.Column="1"
                     Classes="muted"
                     Text="{Binding ContentItems.Count, StringFormat={}Items: {0}}"/>
        </Grid>

        <!-- Search -->
        <TextBox Grid.Row="2"
                 Classes="search"
                 Text="{Binding ContentSearch}"
                 Watermark="Search content / assetsâ€¦"/>

        <!-- Content Grid -->
        <ScrollViewer Grid.Row="4">
          <ItemsControl ItemsSource="{Binding ContentItems}">
            <ItemsControl.ItemsPanel>
              <ItemsPanelTemplate>
                <WrapPanel ItemWidth="120"
                           ItemHeight="120"
                           HorizontalSpacing="12"
                           VerticalSpacing="12"/>
              </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>

            <ItemsControl.ItemTemplate>
              <DataTemplate>
                <Border Classes="item">
                  <StackPanel Spacing="6"
                              HorizontalAlignment="Center"
                              VerticalAlignment="Center">

                    <!-- Icon placeholder -->
                    <Border Width="48" Height="48"
                            Background="#1f1f1f"
                            CornerRadius="6"/>

                    <TextBlock Classes="muted"
                               Text="{Binding Name}"
                               TextAlignment="Center"
                               TextWrapping="Wrap"/>

                  </StackPanel>
                </Border>
              </DataTemplate>
            </ItemsControl.ItemTemplate>
          </ItemsControl>
        </ScrollViewer>

      </Grid>
    </Border>

  </Grid>
</UserControl>
